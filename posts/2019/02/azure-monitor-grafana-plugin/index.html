<!doctype html><html lang=en><head><title>grafana dashboards to monitor your azure services ::
always up, always on</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="On November 2017, the Grafana plugin to monitor your Azure services was announced in Preview.
As a reminder, Grafana is a very popular open-source project listed in the CNCF landscape.
The Grafana Datasource could be configured with either Azure Monitor, Log Analytics or Application Insights to display then metrics of your Azure services.
You could follow this tutorial to monitor your Azure services with Grafana or the official Grafana page about this Azure Monitor plugin to get started and build your own Grafana dashboards."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://mathieu-benoit.github.io/myblog/posts/2019/02/azure-monitor-grafana-plugin/><link rel=stylesheet href=https://mathieu-benoit.github.io/myblog/assets/style.css><link rel=stylesheet href=https://mathieu-benoit.github.io/myblog/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://mathieu-benoit.github.io/myblog/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://mathieu-benoit.github.io/myblog/img/favicon.png><link href=https://mathieu-benoit.github.io/myblog/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/myblog/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/myblog/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/myblog/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/myblog/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/myblog/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="grafana dashboards to monitor your azure services"><meta name=twitter:description content="let's use grafana dashboard for your azure services through azure monitor"><meta property="og:title" content="grafana dashboards to monitor your azure services"><meta property="og:description" content="let's use grafana dashboard for your azure services through azure monitor"><meta property="og:type" content="article"><meta property="og:url" content="https://mathieu-benoit.github.io/myblog/posts/2019/02/azure-monitor-grafana-plugin/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-02-10T00:00:00+00:00"><meta property="article:modified_time" content="2019-02-10T00:00:00+00:00"><meta property="og:site_name" content="always up, always on"><script async src="https://www.googletagmanager.com/gtag/js?id=G-J8536XT21V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-J8536XT21V",{anonymize_ip:!1})}</script></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>always up, always on</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/myblog/about/>about</a></li><li><a href=/myblog/presentations/>presentations</a></li><li><a href=/myblog/tags/>tags</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/myblog/about/>about</a></li><li><a href=/myblog/presentations/>presentations</a></li><li><a href=/myblog/tags/>tags</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>grafana dashboards to monitor your azure services</h1><div class=post-meta><span class=post-date>2019-02-10</span></div><span class=post-tags><a href=https://mathieu-benoit.github.io/myblog/tags/azure/>#azure</a>&nbsp;
<a href=https://mathieu-benoit.github.io/myblog/tags/containers/>#containers</a>&nbsp;</span><div class=post-content><p>On November 2017, <a href=https://azure.microsoft.com/blog/monitor-azure-services-and-applications-using-grafana>the Grafana plugin to monitor your Azure services was announced</a> in Preview.<br>As a reminder, Grafana is a very <a href="https://landscape.cncf.io/selected=grafana">popular open-source project listed in the CNCF landscape</a>.</p><p>The Grafana Datasource could be configured with either Azure Monitor, Log Analytics or Application Insights to display then metrics of your Azure services.</p><p>You could follow this tutorial to <a href=https://docs.microsoft.com/azure/azure-monitor/platform/grafana-plugin>monitor your Azure services with Grafana</a> or the <a href=https://grafana.com/plugins/grafana-azure-monitor-datasource>official Grafana page about this Azure Monitor plugin</a> to get started and build your own Grafana dashboards.</p><p>FYI, <a href=https://github.com/grafana/azure-monitor-datasource>the associated GitHub repo could be found here</a>.</p><p>I recently gave it a try to quickly host my Grafana server with the Azure services plugin on an Azure Container Instance (ACI) instead of the VM proposed by the two documentations described above.<br><em>Note: you could also deploy it on Azure Web App for Containers, on your Azure Kubernetes Service cluster, etc.</em></p><p>Here is how I accomplished this:</p><pre tabindex=0><code>RG=&lt;your-rg-name&gt;
LOC=eastus
ACI=&lt;your-aci-name&gt;

az group create \
 -l $LOC \
 -n $RG

az container create \
 -g $RG \
 -n $ACI \
 -l $LOC \
 --image grafana/grafana:latest \
 --ip-address public \
 --ports 3000 \
 -e GF_INSTALL_PLUGINS=grafana-azure-monitor-datasource
</code></pre><p><em>It is recommended that you use a volume to save the Grafana data in. Otherwise if you remove the docker container, you will lose all your Grafana data (dashboards, users etc.).</em></p><p>Then I created a dedicated Service Principal with the Reader role for the setup of the Azure Monitor and Log Analytics datasources and also an Application Insights Key with the Reader role too for the Application Insights datasource. All of this is described with the two tutorials above.</p><p>Finally, I was able to setup some panels leveraging the available metrics to create my dashboard:
<img src=https://1.bp.blogspot.com/-J84sZM0oLlo/XGDuxHaf6zI/AAAAAAAASks/CZrNT6M1uz0FNXi1-cu93ajHP_ghPDobgCLcBGAs/s640/Grafana.PNG alt="Sceenshot of the dashboard in Grafana."></p><p>For the Log Analytics metrics you could build your own custom queries for example <a href=https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-analyze#container-data-collection-details>with Container Insights you have access to these data-collection</a> and you could have your own <a href=https://docs.microsoft.com/azure/azure-monitor/log-query/query-language>Kusto Queries</a>.</p><p>I think this Azure plugin for Grafana is interesting for different reasons:</p><ul><li>If you are already using Grafana, you could reuse your skills</li><li>If you are looking for a single place to visualize your metrics, graphs, etc.<ul><li>Even if you could do that with Azure Monitor and Azure Dashboards, in that case you don&rsquo;t need to have access to the Azure portal.</li></ul></li><li>If you are looking to expose dashboards to external users who don&rsquo;t have access to your Azure subscription</li></ul><p>Cheers!</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://mathieu-benoit.github.io/myblog/posts/2019/03/azure-pipelines-container-job-for-terraform/><span class=button__icon>←</span>
<span class=button__text>azure devops pipeline container job with terraform</span></a></span>
<span class="button next"><a href=https://mathieu-benoit.github.io/myblog/posts/2018/11/azure-devops-launch/><span class=button__text>azure devops - community launch event in quebec city</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>always up, always on</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2023 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://mathieu-benoit.github.io/myblog/assets/main.js></script>
<script src=https://mathieu-benoit.github.io/myblog/assets/prism.js></script></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-J8536XT21V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-J8536XT21V",{anonymize_ip:!1})}</script></body></html>