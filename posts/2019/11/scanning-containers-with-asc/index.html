<!doctype html><html lang=en><head><title>scanning container images for vulnerabilities in acr with asc ::
always up, always on</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="One of the new feature announced during Ignite 2019 with Azure Security Center (ASC) is the ability in Preview to scan container images in Azure Container Registry (ACR).
Yes you could for sure use any container images scanning tool of your choice like Aqua Security or Twistlock, but now you could leverage ASC too.
I just gave it a try, loved it!
To continue my Security Posture on Azure, I have been leveraging ASC (Standard SKU) and followed this guide."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://mathieu-benoit.github.io/posts/2019/11/scanning-containers-with-asc/><link rel=stylesheet href=https://mathieu-benoit.github.io/assets/style.css><link rel=stylesheet href=https://mathieu-benoit.github.io/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://mathieu-benoit.github.io/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://mathieu-benoit.github.io/img/favicon.png><link href=https://mathieu-benoit.github.io/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mathieu-benoit.github.io/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="scanning container images for vulnerabilities in acr with asc"><meta name=twitter:description content="let's use azure security center (asc) to scan your containers in azure container registry (acr)"><meta property="og:title" content="scanning container images for vulnerabilities in acr with asc"><meta property="og:description" content="let's use azure security center (asc) to scan your containers in azure container registry (acr)"><meta property="og:type" content="article"><meta property="og:url" content="https://mathieu-benoit.github.io/posts/2019/11/scanning-containers-with-asc/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-11-29T00:00:00+00:00"><meta property="article:modified_time" content="2019-11-29T00:00:00+00:00"><meta property="og:site_name" content="always up, always on"><script async src="https://www.googletagmanager.com/gtag/js?id=G-J8536XT21V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-J8536XT21V",{anonymize_ip:!1})}</script></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>always up, always on</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about/>about</a></li><li><a href=/presentations/>presentations</a></li><li><a href=/tags/>tags</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about/>about</a></li><li><a href=/presentations/>presentations</a></li><li><a href=/tags/>tags</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>scanning container images for vulnerabilities in acr with asc</h1><div class=post-meta><span class=post-date>2019-11-29</span></div><span class=post-tags><a href=https://mathieu-benoit.github.io/tags/azure/>#azure</a>&nbsp;
<a href=https://mathieu-benoit.github.io/tags/containers/>#containers</a>&nbsp;
<a href=https://mathieu-benoit.github.io/tags/security/>#security</a>&nbsp;</span><div class=post-content><p>One of the new feature announced during <a href=https://mathieu-benoit.github.io/posts/2019/11/ignite2019/>Ignite 2019</a> with Azure Security Center (ASC) is the ability in Preview to <a href=https://azure.microsoft.com/updates/scan-container-images-for-vulnerabilities-in-azure-security-center>scan container images in Azure Container Registry (ACR)</a>.<br>Yes you could for sure use any container images scanning tool of your choice like Aqua Security or Twistlock, but now you could leverage ASC too.</p><p>I just gave it a try, loved it!</p><p>To continue my <a href=https://mathieu-benoit.github.io/posts/2019/05/azure-security/>Security Posture on Azure</a>, I have been leveraging ASC (Standard SKU) and followed <a href=https://docs.microsoft.com/azure/security-center/azure-container-registry-integration>this guide</a>.</p><p>Now for any container images pushed in ACR I will trigger a scan to get the potential vulnerabilities detected by Qualys. For example, I gave it a try with the <a href=https://github.com/Azure/phippyandfriends>azure/phippyandfriends</a> GitHub repository, and here is the resulting PR of the scans I got: <a href=https://github.com/Azure/phippyandfriends/pull/36>https://github.com/Azure/phippyandfriends/pull/36</a></p><p>Typically, here are the changes of the base images I was able to do/fix:</p><ul><li><code>microsoft/aspnetcore:2.0</code> &ndash;> <code>mcr.microsoft.com/dotnet/core/aspnet:3.1-alpine</code></li><li><code>node:8.9-alpine</code> &ndash;> <code>node:10-alpine</code></li><li><code>php:7.1-apache</code> &ndash;> <code>php:7.3.12-apache-stretch</code></li><li><code>golang:1.10.3</code> &ndash;> <code>golang:1.13.4</code></li></ul><p>As a result:</p><ul><li>6 Major/High CVEs were fixed (<a href=https://github.com/Azure/phippyandfriends/pull/36>see details in this PR</a>)</li><li>Container images size have been reduced (more agility + less surface of attack)<ul><li><code>nodebrady</code>: 86.9MB &ndash;> 77.6MB</li><li><code>parrot</code>: 360MB &ndash;> 116MB</li><li><code>captainkube</code>: 45.4MB &ndash;> 43.1MB</li><li><code>phippy</code>: 406MB &ndash;> 379MB</li></ul></li></ul><p>Here is an example from within the Azure portal of what I fixed today for the PHP base image:</p><p><img src=https://1.bp.blogspot.com/---mC40Qlk9Q/XeGPd5r2Y7I/AAAAAAAAUaE/S-TThL0YNSAq8zaugZI2S7FeYMYv6Sv0QCLcBGAsYHQ/s1600/phippy.PNG alt="Screenshot of a scan result showing an important CVE fixed with the implementation of this blog article."></p><p>Really interesting! I have learned a lot through the research I have made to update those base images.</p><p><em>NB: I have now in my long TODO list, the implementation of this following tutorial to help me keeping such base image up-to-date automatically: <a href=https://docs.microsoft.com/azure/container-registry/container-registry-tutorial-base-image-update>Automate container image builds when a base image is updated in an Azure container registry</a>.</em></p><p>For the pricing details, you could look at <a href=https://docs.microsoft.com/azure/security-center/security-center-pricing>this</a> and <a href=https://azure.microsoft.com/pricing/details/security-center/>this</a>.</p><p>Cheers!</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://mathieu-benoit.github.io/posts/2019/12/cloud-native-bot-app/><span class=button__icon>←</span>
<span class=button__text>my bot just became a cloud native app</span></a></span>
<span class="button next"><a href=https://mathieu-benoit.github.io/posts/2019/11/helm3/><span class=button__text>helm 3 is out</span>
<span class=button__icon>→</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>always up, always on</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2024 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://mathieu-benoit.github.io/assets/main.js></script>
<script src=https://mathieu-benoit.github.io/assets/prism.js></script></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-J8536XT21V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-J8536XT21V",{anonymize_ip:!1})}</script></body></html>